{"version":3,"sources":["threeagent/impl/entities.cljs"],"mappings":"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","names":["js/threeagent","js/threeagent.impl","js/threeagent.impl.entities","js/threeagent.impl.entities.material-cache","threeagent.impl.entities/material-cache","cljs.core/memoize","threeagent.impl.threejs/mesh-phong-material","threeagent.impl.entities/->material","config","js/module$node_modules$three$build$three.Material","cljs.core/PROTOCOL_SENTINEL","this__4491__auto__","writer__4492__auto__","opt__4493__auto__","cljs.core/-write","threeagent.impl.entities/MeshEntity","threeagent.impl.entities/->MeshEntity","geo-fn","_","geo","mat","mesh","js/module$node_modules$three$build$three.Mesh","threeagent.impl.entities/default-light-shadow","threeagent.impl.entities/apply-shadow-settings!","light","shadow-cfg","shadow","camera-obj","map-size","cljs.core.merge","camera","or__4253__auto__","threeagent.impl.entities/LightEntity","threeagent.impl.entities/->LightEntity","create-fn","update-fn","cfg","obj","threeagent.impl.entities/apply-props-clj!","properties","seq__41695","cljs.core/seq","chunk__41696","count__41697","i__41698","vec__41710","cljs.core.nth","temp__5753__auto__","cljs.core/chunked-seq?","c__4679__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__41713","cljs.core/first","cljs.core/next","k","v","threeagent.impl.entities.goog$module$goog$object.set","cljs.core/name","threeagent.impl.entities/builtin-entity-types","js/threeagent.impl.entities.t_threeagent$impl$entities41795","threeagent.impl.entities/t_threeagent$impl$entities41795","_41797","meta41796","threeagent.impl.entities/->t_threeagent$impl$entities41795","js/module$node_modules$three$build$three.Object3D","js/threeagent.impl.entities.t_threeagent$impl$entities41734","threeagent.impl.entities/t_threeagent$impl$entities41734","_41736","meta41735","threeagent.impl.entities/->t_threeagent$impl$entities41734","js/module$node_modules$three$build$three.Group","js/threeagent.impl.entities.t_threeagent$impl$entities41747","threeagent.impl.entities/t_threeagent$impl$entities41747","_41749","meta41748","p__41750","map__41751","cljs.core/--destructure-map","cljs.core.get","threeagent.impl.entities/->t_threeagent$impl$entities41747","object","js/threeagent.impl.entities.t_threeagent$impl$entities41752","threeagent.impl.entities/t_threeagent$impl$entities41752","_41754","meta41753","threeagent.impl.entities/->t_threeagent$impl$entities41752","cam","js/module$node_modules$three$build$three.PerspectiveCamera","o","js/threeagent.impl.entities.t_threeagent$impl$entities41808","threeagent.impl.entities/t_threeagent$impl$entities41808","_41810","meta41809","threeagent.impl.entities/->t_threeagent$impl$entities41808","js/module$node_modules$three$build$three.OrthographicCamera","p__41755","map__41756","width","height","width-segments","height-segments","js/module$node_modules$three$build$three.PlaneGeometry","p__41765","map__41766","depth","depth-segments","js/module$node_modules$three$build$three.BoxGeometry","p__41718","map__41719","radius","phi-start","phi-length","theta-start","theta-length","js/module$node_modules$three$build$three.SphereGeometry","threeagent.impl.util/pi-times-2","threeagent.impl.util/pi","p__41783","map__41784","radius-top","radius-bottom","radial-segments","open-ended?","js/module$node_modules$three$build$three.CylinderGeometry","p__41767","map__41768","segments","js/module$node_modules$three$build$three.CircleGeometry","p__41787","map__41788","js/module$node_modules$three$build$three.ConeGeometry","p__41802","map__41803","detail","js/module$node_modules$three$build$three.DodecahedronGeometry","p__41793","map__41794","js/module$node_modules$three$build$three.Icosahedron","p__41769","map__41770","js/module$node_modules$three$build$three.Octahedron","p__41800","map__41801","js/module$node_modules$three$build$three.TetrahedronGeometry","p__41743","map__41744","inner-radius","outer-radius","theta-segments","phi-segments","js/module$node_modules$three$build$three.RingGeometry","p__41777","map__41778","tube","tubular-segments","arc","js/module$node_modules$three$build$three.TorusGeometry","p__41758","map__41759","p","q","js/module$node_modules$three$build$three.TorusKnotGeometry","p__41785","map__41786","shape","js/module$node_modules$three$build$three.ShapeGeometry","p__41780","map__41781","intensity","color","js/module$node_modules$three$build$three.AmbientLight","p__41725","map__41726","distance","decay","js/module$node_modules$three$build$three.PointLight","p__41739","map__41740","sky-color","ground-color","js/module$node_modules$three$build$three.HemisphereLight","clojure.set/rename-keys","p__41728","map__41729","target","js/module$node_modules$three$build$three.DirectionalLight","p__41732","map__41733","cljs.core.dissoc","p__41775","map__41776","js/module$node_modules$three$build$three.RectAreaLight","p__41771","map__41772","angle","penumbra","js/module$node_modules$three$build$three.SpotLight","threeagent.impl.util/pi-over-2","p__41773","map__41774"],"sourcesContent":["(ns threeagent.impl.entities\n  \"Defines all of the built-in IEntityType types.\n  This namespace is meant for internal use only, these functions are subject to change.\"\n  (:require [threeagent.entity :refer [IEntityType IUpdateableEntityType]]\n            [threeagent.impl.threejs :as threejs]\n            [threeagent.impl.util :refer [pi pi-times-2 pi-over-2]]\n            [\"three\" :as three]\n            [clojure.set :refer [rename-keys]]\n            [goog.object :as gobject]))\n            \n\n(defonce ^:private material-cache (memoize threejs/mesh-phong-material))\n\n(defn- ->material [config]\n  (if (instance? three/Material config)\n    config\n    (material-cache config)))\n\n(deftype MeshEntity [geo-fn]\n  IEntityType\n  (create [_ _ config]\n    (let [geo (geo-fn config)\n          mat (->material (:material config))\n          mesh (three/Mesh. geo mat)]\n      (set! (.-castShadow mesh) (:cast-shadow config))\n      (set! (.-receiveShadow mesh) (:receive-shadow config))\n      mesh))\n  (destroy! [_ _ _ _])\n  IUpdateableEntityType\n  (update! [_ _ ^three/Mesh mesh config]\n    (let [geo (geo-fn config)\n          mat (->material (:material config))]\n      (set! (.-geometry mesh) geo)\n      (set! (.-material mesh) mat)\n      (set! (.-castShadow mesh) (:cast-shadow config))\n      (set! (.-receiveShadow mesh) (:receive-shadow config))\n      mesh)))\n\n(def ^:private default-light-shadow {:map-size {:width 512\n                                                :height 512}\n                                     :focus 1.0\n                                     :camera {:near 0.5\n                                              :far 500\n                                              :left -5\n                                              :right 5\n                                              :top 5\n                                              :bottom -5}})\n\n(defn- apply-shadow-settings! [light shadow-cfg]\n  (when shadow-cfg\n    (let [shadow (.-shadow light)\n          camera-obj (.-camera shadow)\n          map-size (merge (:map-size default-light-shadow)\n                          (:map-size shadow-cfg))\n          camera (merge (:camera default-light-shadow)\n                        (:camera shadow-cfg))]\n      (set! (.-width (.-mapSize shadow)) (:width map-size))\n      (set! (.-height (.-mapSize shadow)) (:height map-size))\n      (set! (.-near camera-obj) (:near camera))\n      (set! (.-far camera-obj) (:far camera))\n      (set! (.-left camera-obj) (:left camera))\n      (set! (.-right camera-obj) (:right camera))\n      (set! (.-top camera-obj) (:top camera))\n      (set! (.-bottom camera-obj) (:bottom camera))\n      (set! (.-focus shadow) (or (:focus shadow-cfg)\n                                 (:focus default-light-shadow)))\n      (.updateProjectionMatrix camera-obj)))\n  light)\n\n(deftype LightEntity [create-fn update-fn]\n  IEntityType\n  (create [_ _ cfg]\n    (let [light (create-fn cfg)]\n      (set! (.-castShadow light) (:cast-shadow cfg))\n      (set! (.-receiveShadow light) (:receive-shadow cfg))\n      (apply-shadow-settings! light (:shadow cfg))))\n  (destroy! [_ _ _ _])\n  IUpdateableEntityType\n  (update! [_ _ ^three/Light obj cfg]\n    (update-fn obj cfg)\n    (set! (.-castShadow obj) (:cast-shadow cfg))\n    (set! (.-receiveShadow obj) (:receive-shadow cfg))\n    (apply-shadow-settings! obj (:shadow cfg))))\n\n(defn- apply-props-clj! [^js obj properties]\n  (doseq [[k v] properties]\n    (gobject/set obj (name k) v))\n  obj)\n\n(def builtin-entity-types\n  {;; Common\n   :object (reify IEntityType\n             (create [_ _ _] (three/Object3D.))\n             (destroy! [_ _ _ _])\n             IUpdateableEntityType\n             (update! [_ _ obj _] obj))\n   :group (reify IEntityType\n            (create [_ _ _] (three/Group.))\n            (destroy! [_ _ _ _])\n            IUpdateableEntityType\n            (update! [_ _ obj _] obj))\n   :instance (reify IEntityType\n               (create [_ _ {:keys [object]}]\n                 object)\n               (destroy! [_ _ _ _]))\n\n   ;; Cameras\n   :perspective-camera (reify IEntityType\n                         (create [_ _ cfg]\n                           (let [cam (three/PerspectiveCamera. 75.0 1.0 0.1 2000.0)]\n                             (set! (.-active cam) true)\n                             (apply-props-clj! cam cfg)\n                             (.updateProjectionMatrix cam)\n                             cam))\n                         (destroy! [_ _ _ _])\n                         IUpdateableEntityType\n                         (update! [_ _ ^three/PerspectiveCamera o cfg]\n                           (apply-props-clj! o cfg)\n                           (.updateProjectionMatrix o)\n                           o))\n   :orthographic-camera (reify IEntityType\n                          (create [_ _ cfg]\n                            (let [cam (three/OrthographicCamera. -1 1 1 -1 0.1 2000.0)]\n                              (set! (.-active cam) true)\n                              (apply-props-clj! cam cfg)\n                              (.updateProjectionMatrix cam)\n                              cam))\n                          (destroy! [_ _ _ _])\n                          IUpdateableEntityType\n                          (update! [_ _ ^three/OrthographicCamera o cfg]\n                            (apply-props-clj! o cfg)\n                            (.updateProjectionMatrix o)\n                            o))\n   ;; Primitives\n   :plane (->MeshEntity (fn [{:keys [width height width-segments height-segments]}]\n                          (three/PlaneGeometry. (or width 1)\n                                                (or height 1)\n                                                (or width-segments 1)\n                                                (or height-segments 1))))\n   :box (->MeshEntity (fn [{:keys [width height depth width-segments height-segments depth-segments]}]\n                        (three/BoxGeometry. (or width 1)\n                                            (or height 1)\n                                            (or depth 1)\n                                            (or width-segments 1)\n                                            (or height-segments 1)\n                                            (or depth-segments 1))))\n   :sphere (->MeshEntity (fn [{:keys [radius width-segments height-segments phi-start\n                                      phi-length theta-start theta-length]}]\n                           (three/SphereGeometry. (or radius 1)\n                                                  (or width-segments 8)\n                                                  (or height-segments 6)\n                                                  (or phi-start 0)\n                                                  (or phi-length pi-times-2)\n                                                  (or theta-start 0)\n                                                  (or theta-length pi))))\n   :cylinder (->MeshEntity (fn [{:keys [radius-top radius-bottom height radial-segments\n                                        height-segments open-ended? theta-start theta-length]}]\n                             (three/CylinderGeometry. (or radius-top 1)\n                                                      (or radius-bottom 1)\n                                                      (or height 1)\n                                                      (or radial-segments 8)\n                                                      (or height-segments 1)\n                                                      open-ended?\n                                                      (or theta-start 0)\n                                                      (or theta-length pi-times-2))))\n   :circle (->MeshEntity (fn [{:keys [radius segments theta-start theta-length]}]\n                           (three/CircleGeometry. (or radius 1)\n                                                  (or segments 8)\n                                                  (or theta-start 0)\n                                                  (or theta-length pi-times-2))))\n   :cone (->MeshEntity (fn [{:keys [radius height radial-segments height-segments open-ended?\n                                    theta-start theta-length]}]\n                         (three/ConeGeometry. (or radius 1)\n                                              (or height 1)\n                                              (or radial-segments 8)\n                                              (or height-segments 1)\n                                              open-ended?\n                                              (or theta-start 0)\n                                              (or theta-length pi-times-2))))\n   :dodecahedron (->MeshEntity (fn [{:keys [radius detail]}]\n                                 (three/DodecahedronGeometry. (or radius 1)\n                                                              (or detail 0))))\n   :icosahedron (->MeshEntity (fn [{:keys [radius detail]}]\n                                (three/Icosahedron. (or radius 1)\n                                                    (or detail 0))))\n   :octahedron (->MeshEntity (fn [{:keys [radius detail]}]\n                               (three/Octahedron. (or radius 1)\n                                                  (or detail 0))))\n   :tetrahedron (->MeshEntity (fn [{:keys [radius detail]}]\n                                (three/TetrahedronGeometry. (or radius 1)\n                                                            (or detail 0))))\n   :ring (->MeshEntity (fn [{:keys [inner-radius outer-radius theta-segments phi-segments\n                                    theta-start theta-length]}]\n                         (three/RingGeometry. (or inner-radius 0.5)\n                                              (or outer-radius 1.0)\n                                              (or theta-segments 8)\n                                              (or phi-segments 8)\n                                              (or theta-start 0)\n                                              (or theta-length pi-times-2))))\n   :torus (->MeshEntity (fn [{:keys [radius tube radial-segments tubular-segments arc]}]\n                          (three/TorusGeometry. (or radius 1)\n                                                (or tube 0.4)\n                                                (or radial-segments 8)\n                                                (or tubular-segments 6)\n                                                (or arc pi-times-2))))\n   :torus-knot (->MeshEntity (fn [{:keys [radius tube tubular-segments radial-segments p q]}]\n                               (three/TorusKnotGeometry. (or radius 1)\n                                                         (or tube 0.4)\n                                                         (or tubular-segments 64)\n                                                         (or radial-segments 8)\n                                                         (or p 2)\n                                                         (or q 3))))\n   :shape (->MeshEntity (fn [{:keys [shape]}]\n                          (three/ShapeGeometry. shape)))\n   ;; Lights\n   :ambient-light (->LightEntity\n                   (fn [{:keys [intensity color]}]\n                     (three/AmbientLight. (or color 0xFFFFFF)\n                                          (or intensity 1.0)))\n                   (fn [^three/Light o cfg]\n                     (apply-props-clj! o cfg)\n                     o))\n   :point-light (->LightEntity\n                 (fn [{:keys [intensity color distance decay]}]\n                   (three/PointLight. (or color 0xFFFFFF)\n                                      (or intensity 1.0)\n                                      (or distance 0)\n                                      (or decay 1.0)))\n                 (fn [^three/Light o cfg]\n                   (apply-props-clj! o cfg)\n                   o))\n   :hemisphere-light (->LightEntity\n                      (fn [{:keys [sky-color ground-color intensity]}]\n                        (three/HemisphereLight.\n                         (or sky-color 0xFFFFFF)\n                         (or ground-color 0xFFFFFF)\n                         (or intensity 1)))\n                      (fn [^three/Light o cfg]\n                        (apply-props-clj! o (rename-keys cfg {:sky-color :skyColor\n                                                              :ground-color :groundColor}))\n                        o))\n   :directional-light (->LightEntity\n                       (fn [{:keys [intensity color target]}]\n                         (let [light (three/DirectionalLight. (or color 0xFFFFFF)\n                                                              (or intensity 1.0))]\n                           (set! (.-originalTarget light) (.-target light))\n                           (when target\n                             (set! (.-target light) target))\n                           light))\n                       (fn [^three/Light o {:keys [target] :as cfg}]\n                         (if target\n                           (set! (.-target o) target)\n                           (set! (.-target o) (.-originalTarget o)))\n                         (apply-props-clj! o (dissoc cfg :target))\n                         o))\n   :rect-area-light (->LightEntity\n                     (fn [{:keys [intensity color width height]}]\n                       (three/RectAreaLight. (or color 0xFFFFFF)\n                                             (or intensity 1.0)\n                                             (or width 10)\n                                             (or height 10)))\n                     (fn [^three/Light o cfg]\n                       (apply-props-clj! o cfg)\n                       o))\n   :spot-light (->LightEntity\n                (fn [{:keys [intensity color distance angle penumbra decay target]}]\n                  (let [light (three/SpotLight. (or color 0xFFFFFF)\n                                                (or intensity 1.0)\n                                                (or distance 0)\n                                                (or angle pi-over-2)\n                                                (or penumbra 0)\n                                                (or decay 1.0))]\n                    (set! (.-originalTarget light) (.-target light))\n                    (when target\n                      (set! (.-target light) target))\n                    light))\n                (fn [^three/Light o {:keys [target] :as cfg}]\n                  (if target\n                    (set! (.-target o) target)\n                    (set! (.-target o) (.-originalTarget o)))\n                  (apply-props-clj! o (dissoc cfg :target))\n                  o))})\n                                        \n                                  \n"]}